var Manager=Klass.create();Manager.extend(JqManager),Manager.extend({init:function(){this.timer=null,this.anim=!1,this.mask_com=[],this.copy_com=[null,null,null],_cmn.ua.sp&&$("body").addClass("sp")},set:function(){this.setParam(),this.setObject()},start:function(){var e=this.getAsyncCommand(arguments),n=new Command;n.call(this,this.setState,[],""),n.call(this,this.resize,[],""),e&&e.publish&&n.callback(e,e.publish,[]),n.execute()},after:function(){var e=this.getAsyncCommand(arguments),n=new Command;n.call(this,this.resize,[],""),n.sleep(10),n.call(this,this.setEvent,[],""),n.sleep(10),n.call(this,this.setWayPoint,[],""),n.call(this,this.resize,[],""),n.call(this,this.startLogo,[],""),n.call(this,function(){$("#top").find(".copy").addClass("open")},[],""),n.sleep(250);for(var a=0;a<$("#top").find("h1").find(".t").length;a++)n.call(this,function(e){$($("#top").find("h1").find(".t")[e]).addClass("open")},[a],""),n.sleep(22);e&&e.publish&&n.callback(e,e.publish,[]),n.execute()},startLogo:function(){var e=new Command;e.call(this,function(){_manager.startMark($("#logo_fix").find(".mark_anim"))},[],""),e.sleep(7e3),e.call(this,this.startLogo,[],""),e.execute()},setParam:function(){"ie"===_cmn.ua&&8===~~_cmn.ver&&(this.ie8=!0),("ie"!==_cmn.ua||"ie"===_cmn.ua&&~~_cmn.ver>=10)&&(this.modern=!0)},setObject:function(){_manager.mask_com=[];for(var e=0;e<$(".mark_anim").length;e++)$($(".mark_anim")).attr("data-index",e),_manager.mask_com.push(null)},setState:function(){_manager.ie8||_manager.modern,$("body").removeClass("hide"),this.resize(null,!1),$("#logo_fix").find(".mark_anim").addClass("open")},setEvent:function(){this.setResize(),this.controller=new ScrollMagic.Controller,this.setScene(),_cmn.scroll_current=0,_cmn.scroll_past=0,$(".btn_cir").hover(function(){_cmn.ua.sp||_manager.startMarkHv($(this).find(".mark_step"))},function(){_cmn.ua.sp||$(this).find("img").removeClass("active")}),$(".journal_hv").hover(function(){_cmn.ua.sp||_manager.startMarkHv($(this).parents(".journal_item").find(".mark_step"))},function(){_cmn.ua.sp||$(this).parents(".journal_item").find(".mark_step").find("img").removeClass("active")}),$(".hv_mark").hover(function(){_cmn.ua.sp||_manager.startMarkHv($(this).find(".mark_step"))},function(){_cmn.ua.sp||$(this).find("img").removeClass("active")}),$(".search_parts").find(".sp_bg").on("click",function(){$(".search_parts").hasClass("open")?$(".search_parts").removeClass("open"):$(".search_parts").addClass("open")})},showSec:function(e){if(_cmn.spview){var n=new Command;n.call(this,function(){e.find(".fadein").addClass("open")},[],""),n.sleep(600),n.call(this,function(){_cmn.showEnJp(e.find("h2"))},[],""),n.sleep(600),n.call(this,function(){e.find(".txts").addClass("open")},[],""),n.execute()}else{var n=new Command;n.call(this,function(){_cmn.showEnJp(e.find("h2"))},[],""),n.sleep(250),n.call(this,function(){e.find(".fadein").addClass("open")},[],""),n.sleep(250),n.call(this,function(){e.find(".txts").addClass("open")},[],""),n.execute()}},showSec2:function(e){if(_cmn.spview){var n=new Command;n.call(this,function(){_cmn.showEnJp(e.find("h2"))},[],""),n.sleep(600),n.call(this,function(){e.find(".txts").addClass("open")},[],""),n.sleep(600),n.call(this,function(){e.find(".fadein").addClass("open")},[],""),n.execute()}else{var n=new Command;n.call(this,function(){_cmn.showEnJp(e.find("h2"))},[],""),n.sleep(250),n.call(this,function(){e.find(".txts").addClass("open")},[],""),n.sleep(250),n.call(this,function(){e.find(".fadein").addClass("open")},[],""),n.execute()}},setScene:function(){},playMask:function(e){var n={size:"100%"};_manager.rewindmask_g&&_manager.rewindmask_g.kill(),_manager.playmask_g&&_manager.playmask_g.kill(),_manager.playmask_g=gsap.fromTo(n,{size:"100%"},{size:"200%",duration:.5,ease:Power0.easeNone,onUpdate:function(){e.stop().css({"-webkit-mask-size":n.size})}})},rewindMask:function(e){var n={size:"200%"};_manager.rewindmask_g&&_manager.rewindmask_g.kill(),_manager.playmask_g&&_manager.playmask_g.kill(),_manager.rewindmask_g=gsap.fromTo(n,{size:"200%"},{size:"100%",duration:.5,ease:Power0.easeNone,onUpdate:function(){e.stop().css({"-webkit-mask-size":n.size})}})},setScrollEvent:function(){},setWayPoint:function(){var e=.7*$(window).height(),n=.7*$(window).height(),a=.3*$(window).height(),o=1;_cmn.ua.sp&&(o=1.2,e=.65*$(window).height(),n=.9*$(window).height(),a=.45*$(window).height()),_manager.waypoints=[],_manager.waypoints.push(new Waypoint({element:$("#wrapper"),handler:function(e){"down"==e?_manager.toggleMenu(!0):_manager.toggleMenu(!1)},offset:-10})),_manager.waypoints.push(new Waypoint({element:$("#history"),handler:function(e){"down"==e&&_manager.showSec($("#history"))},offset:n})),_manager.waypoints.push(new Waypoint({element:$("#philosophy"),handler:function(e){"down"==e&&_manager.showSec2($("#philosophy"))},offset:n})),_manager.waypoints.push(new Waypoint({element:$("#next"),handler:function(e){"down"==e&&_manager.showSec2($("#next"))},offset:n})),_manager.waypoints.push(new Waypoint({element:$("#footer").find(".menus"),handler:function(e){"down"==e?_cmn.showFooter():_cmn.closeFooter()},offset:"100%"}))},toggleMenu:function(e){e?($("#btn_menu").addClass("active"),$("#header").addClass("passive")):($("#btn_menu").removeClass("active"),$("#header").removeClass("passive"))},showPhoto:function(e){_manager.copy_com[e]&&(_manager.copy_com[e].destroy(_manager.copy_com[e]),_manager.copy_com[e]=null);var n=new Command;_manager.copy_com[e]=n,n.call(this,function(){$("#photo_ttl").find(".copy").removeClass("active"),$("#photo_copy"+e).addClass("active"),$("#photo_copy"+e).find(".mark").addClass("open")},[],""),n.sleep(22);for(var a=0;a<$("#photo_copy"+e).find(".t").length;a++)n.call(this,function(n){$($("#photo_copy"+e).find(".t")[n]).addClass("open")},[a],""),n.sleep(22);n.execute()},closePhoto:function(e){_manager.copy_com[e]&&(_manager.copy_com[e].destroy(_manager.copy_com[e]),_manager.copy_com[e]=null);var n=new Command;n.call(this,function(){$(".photo_slide_item"+e).removeClass("open"),$("#photo_copy"+e).find(".mark").removeClass("open"),$("#photo_copy"+e).find(".t").removeClass("open")},[],""),n.execute()},showEnJp:function(e){_manager.showEnJpCom&&(_manager.showEnJpCom.destroy(_manager.showEnJpCom),_manager.showEnJpCom=null),_manager.showEnJpCom2&&(_manager.showEnJpCom2.destroy(_manager.showEnJpCom2),_manager.showEnJpCom2=null),_manager.closeEnJpCom&&(_manager.closeEnJpCom.destroy(_manager.closeEnJpCom),_manager.closeEnJpCom=null);var n=new Command;_manager.showEnJpCom=n,n.call(this,function(){var n=new Command;_manager.showEnJpCom2=n,n.sleep(66*(e.find(".en").find(".t").length-1)),n.sleep(170),n.call(this,function(){e.find(".jp").addClass("open")},[],""),n.sleep(40),n.call(this,function(){e.find(".btn_target").addClass("open")},[],""),n.execute()},[],"");for(var a=0;a<e.find(".en").find(".t").length;a++)n.call(this,function(n){$(e.find(".en").find(".t")[n]).addClass("open")},[a],""),n.sleep(66);n.sleep(100),n.execute()},closeEnJp:function(e){_manager.showEnJpCom&&(_manager.showEnJpCom.destroy(_manager.showEnJpCom),_manager.showEnJpCom=null),_manager.showEnJpCom2&&(_manager.showEnJpCom2.destroy(_manager.showEnJpCom2),_manager.showEnJpCom2=null),_manager.closeEnJpCom&&(_manager.closeEnJpCom.destroy(_manager.closeEnJpCom),_manager.closeEnJpCom=null);var n=new Command;_manager.closeEnJpCom=n,n.call(this,function(){e.find(".en").find(".t").removeClass("open"),e.find(".jp").removeClass("open"),e.find(".btn_target").removeClass("open")},[],""),n.execute()},startMarkHv:function(e){if(!e.hasClass("anim")){e.addClass("anim"),e.find("img").removeClass("active"),$(e.find("img")[0]).addClass("passive");for(var n=new Command,a=0;a<e.find("img").length;a++)n.call(this,function(n){e.find("img").removeClass("active"),$(e.find("img")[n]).addClass("active")},[a],""),n.sleep(20);n.call(this,function(){e.removeClass("anim")},[],""),n.execute()}},startMark:function(e){e.hasClass("anim")&&(e.removeClass("anim"),e.find("img").removeClass("active"));var n=~~e.attr("data-index");_manager.mask_com[n]&&(_manager.mask_com[n].destroy(_manager.mask_com[n]),_manager.mask_com[n]=null),e.removeClass("anim"),e.find("img").removeClass("active"),$(e.find("img")[0]).addClass("active");var a=new Command;_manager.mask_com[n]=a,e.addClass("anim");for(var o=0;o<e.find("img").length;o++)a.call(this,function(n){e.find("img").removeClass("active"),$(e.find("img")[n]).addClass("active")},[o],""),a.sleep(40);a.execute()},startMarkIntro:function(e){_manager.mask_com_intro&&(_manager.mask_com_intro.destroy(_manager.mask_com_intro),_manager.mask_com_intro=null),e.removeClass("anim"),e.find("img").removeClass("active"),$(e.find("img")[0]).addClass("active");var n=new Command;_manager.mask_com_intro=n,e.addClass("anim");for(var a=0;a<e.find("img").length;a++)n.call(this,function(n){e.find("img").removeClass("active"),$(e.find("img")[n]).addClass("active")},[a],""),n.sleep(40);n.execute()},startMarkFooter:function(e){_manager.mask_com_footer&&(_manager.mask_com_footer.destroy(_manager.mask_com_footer),_manager.mask_com_footer=null),e.removeClass("anim"),e.find("img").removeClass("active"),$(e.find("img")[0]).addClass("active");var n=new Command;_manager.mask_com_footer=n,e.addClass("anim");for(var a=0;a<e.find("img").length;a++)n.call(this,function(n){e.find("img").removeClass("active"),$(e.find("img")[n]).addClass("active")},[a],""),n.sleep(40);n.execute()},endMark:function(e){e.removeClass("anim"),e.find("img").removeClass("active"),$(e.find("img")[0]).addClass("active")},showFooter:function(){_manager.showFooterCom&&(_manager.showFooterCom.destroy(_manager.showFooterCom),_manager.showFooterCom=null),_manager.closeFooterCom&&(_manager.closeFooterCom.destroy(_manager.closeFooterCom),_manager.closeFooterCom=null);var e=new Command;_manager.showFooterCom=e,e.call(this,function(){$("#btn_menu").addClass("passive"),$("#footer").find(".menus").addClass("open"),$("#footer").find(".copy").addClass("open"),$("#footer").find(".logo_set").addClass("open"),_manager.startMarkFooter($("#footer").find(".mark_anim"))},[],""),e.execute()},closeFooter:function(){_manager.showFooterCom&&(_manager.showFooterCom.destroy(_manager.showFooterCom),_manager.showFooterCom=null),_manager.closeFooterCom&&(_manager.closeFooterCom.destroy(_manager.closeFooterCom),_manager.closeFooterCom=null);var e=new Command;_manager.closeFooterCom=e,e.call(this,function(){$("#btn_menu").removeClass("passive"),$("#footer").find(".menus").removeClass("open"),$("#footer").find(".copy").removeClass("open"),$("#footer").find(".logo_set").removeClass("open")},[],""),e.execute()},setResize:function(){var e=_cmn.ua.sp?"orientationchange":"resize";$(window).on(e,function(){_manager.resize(),setTimeout(function(){_manager.resize()},500)})},resize:function(e,n){$(window),window.innerWidth,$(window).height();_cmn.windowH=$(".screen").height(),$("#top").find(".photo").css({height:_cmn.windowH-$("#top").find(".bar").height()}),Waypoint.refreshAll()},resize_all:function(){}});
$(function(){}),window.onload=function(){_cmn||(_cmn=CmnManager.create(),_cmn.set(),_cmn.start())};