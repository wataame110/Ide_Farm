var Manager=Klass.create();Manager.extend(JqManager),Manager.extend({init:function(){this.timer=null,this.anim=!1,this.mask_com=[],this.copy_com=[null,null,null],this.current_tag=[],this.current_prod=[],this.current_tag_tmp=[],this.target_tag=[],_cmn.ua.sp&&$("body").addClass("sp")},set:function(){this.setParam(),this.setObject()},start:function(){var a=this.getAsyncCommand(arguments),e=new Command;e.call(this,this.setState,[],""),a&&a.publish&&e.callback(a,a.publish,[]),e.execute()},after:function(){var a=this.getAsyncCommand(arguments),e=new Command;e.call(this,this.setEvent,[],""),e.sleep(600),e.call(this,function(){_cmn.showEnJp($("#top").find(".en_jp"))},[],""),e.sleep(800),e.call(this,function(){$("#top").find(".btns").addClass("open")},[],""),e.call(this,this.startLogo,[],""),a&&a.publish&&e.callback(a,a.publish,[]),e.execute()},startLogo:function(){var a=new Command;a.call(this,function(){_manager.startMark($("#logo_fix").find(".mark_anim"))},[],""),a.sleep(7e3),a.call(this,this.startLogo,[],""),a.execute()},setParam:function(){"ie"===_cmn.ua&&8===~~_cmn.ver&&(this.ie8=!0),("ie"!==_cmn.ua||"ie"===_cmn.ua&&~~_cmn.ver>=10)&&(this.modern=!0)},setObject:function(){this.float_filter=Float.create($("#float_filter"),$(".btn_filter"),!0,!1),this.float_product=FloatProd.create($("#float_product"),$(".btn_product"),!0,!0),this.float_product.setShowfunc(_manager.setProd),this.float_product.setHidefunc(_manager.delProd);var a=$.url();if(a.data.param.query.tag){_manager.target_tag=a.data.param.query.tag;for(var e=0;e<_manager.target_tag.length;e++)_manager.current_tag.push(_manager.target_tag[e]),_manager.current_tag_tmp.push(_manager.target_tag[e])}_manager.mask_com=[],_manager.sort();for(var e=0;e<$(".mark_anim").length;e++)$($(".mark_anim")).attr("data-index",e),_manager.mask_com.push(null)},setState:function(){_manager.ie8||_manager.modern,$("body").removeClass("hide"),this.resize(null,!1),$("#logo_fix").find(".mark_anim").addClass("open")},setProd:function(a){var e=~~a.attr("data-index"),t=$.templates("#template"),n=$.templates("#template_photo"),o=_product[e];""==o.allergy2?o.allergy_status="tba":o.allergy_status="";var r=t.render(o),s=n.render(o);if($("#prod_slide").empty().html(s),$("#prod_scroll_area").empty().html(r),$("body").css({overflow:"hidden"}),_manager.slide_prod&&_manager.slide_prod.destroy(!0,!0),$("#slide_prod").find(".swiper-slide").length>1?(_manager.slide_prod=new Swiper("#slide_prod",{speed:1e3,loop:!0,navigation:{nextEl:".swiper-button-next_pc",prevEl:".swiper-button-prev_pc"},pagination:{el:".swiper-pagination_pc",clickable:!0}}),_manager.slide_prod_sp=new Swiper("#slide_prod_sp",{speed:1e3,loop:!0,navigation:{nextEl:".swiper-button-next_sp",prevEl:".swiper-button-prev_sp"},pagination:{el:".swiper-pagination_sp",clickable:!0}})):($("#slide_prod_sp").find(".ctrl").addClass("hide"),$("#slide_prod").find(".ctrl").addClass("hide")),e==_manager.current_prod[0])$(".btn_cir_prev").addClass("passive");else{var i=_manager.current_prod.indexOf(e);$(".btn_cir_prev").removeClass("passive").attr("data-index",_manager.current_prod[i-1])}if(e==_manager.current_prod[_manager.current_prod.length-1])$(".btn_cir_next").addClass("passive");else{var i=_manager.current_prod.indexOf(e);$(".btn_cir_next").removeClass("passive").attr("data-index",_manager.current_prod[i+1])}Ts.loadFont()},delProd:function(){$("#prod_scroll_area").empty(),$("#template_photo").empty(),$("body").css({overflow:"auto"})},setEvent:function(){this.setResize(),this.setWayPoint(),$(".btn_tag").on("click",function(){if($(this).hasClass("active")){$(this).removeClass("active");var a=_manager.current_tag.indexOf($(this).attr("data-tag"));_manager.current_tag.splice(a,1)}else $(this).addClass("active"),_manager.current_tag.push($(this).attr("data-tag"))}),$(".btn_tag_float").on("click",function(){if($(this).hasClass("active")){$(this).removeClass("active");var a=_manager.current_tag_tmp.indexOf($(this).attr("data-tag"));_manager.current_tag_tmp.splice(a,1)}else $(this).addClass("active"),_manager.current_tag_tmp.push($(this).attr("data-tag"))}),$(".btn_select").on("click",function(){_manager.is_anim_sort||(_manager.current_tag=_manager.current_tag_tmp,_manager.float_filter.hide(),_manager.sort())}),$(".btn_reset_select").on("click",function(){_manager.reset()}),$(".btn_reset_float").on("click",function(){_manager.resetFloat()}),$(".btn_prod_nav").on("click",function(){_manager.is_anim_float||_manager.changeProd($(this))}),$(".btn_cir").hover(function(){_cmn.ua.sp||_manager.startMarkHv($(this).find(".mark_step"))},function(){_cmn.ua.sp||$(this).find("img").removeClass("active")}),$(".journal_hv").hover(function(){_cmn.ua.sp||_manager.startMarkHv($(this).parents(".journal_item").find(".mark_step"))},function(){_cmn.ua.sp||$(this).parents(".journal_item").find(".mark_step").find("img").removeClass("active")}),$(".hv_mark").hover(function(){_cmn.ua.sp||_manager.startMarkHv($(this).find(".mark_step"))},function(){_cmn.ua.sp||$(this).find("img").removeClass("active")}),$(".search_parts").find(".sp_bg").on("click",function(){$(".search_parts").hasClass("open")?$(".search_parts").removeClass("open"):$(".search_parts").addClass("open")})},changeProd:function(a){_manager.is_anim_float=!0;var e=new Command,t=150;e.call(this,function(){$("#product_target").animate({opacity:0},t,"linear")},[],""),e.sleep(t),e.call(this,function(){_manager.float_product.scroll?_manager.float_product.scroll.scrollTo(0,0,10):_manager.float_product.scroll_dom.scroll({top:0})},[],""),e.sleep(20),e.call(this,function(){_manager.delProd(),_manager.setProd(a),_manager.float_product.o.find(".inner").css({scale:1.05})},[],""),e.sleep(50),e.sleep(t),e.call(this,function(){_manager.float_product.scroll?(_manager.float_product.scroll.scrollTo(0,0,10),_manager.float_product.scroll.refresh()):_manager.float_product.scroll_dom.scroll({top:0}),_manager.is_anim_float=!1,_manager.float_product.o.find(".inner").transition({scale:1},_manager.float_product.anim_time,_cmn.anim_ease),$("#product_target").animate({opacity:1},t,"linear")},[],""),e.sleep(100),e.call(this,function(){_manager.float_product.scroll?_manager.float_product.scroll.scrollTo(0,0,10):_manager.float_product.scroll_dom.scroll({top:0})},[],""),e.execute()},reset:function(){_manager.current_tag=[],$("#float_filter").find(".btn_tag").removeClass("active"),_manager.current_tag_tmp=[],$("#float_filter").find(".btn_tag_float").removeClass("active"),_manager.sort()},resetFloat:function(){_manager.current_tag_tmp=[],$("#float_filter").find(".btn_tag_float").removeClass("active")},sort:function(){var a=new Command,e=300;if(_manager.current_prod=[],_manager.is_anim_sort=!0,a.call(this,function(){$("#items").animate({opacity:0},e,"linear")},[],""),a.sleep(e),a.call(this,function(){$("#items").find(".item_prod").removeClass("active"),$("#current_tags").find(".active").removeClass("active"),$("#float_filter").find(".tags").find(".active").removeClass("active")},[],""),_manager.current_tag.length>0)for(var t=0;t<_manager.current_tag.length;t++)a.call(this,function(a){$("#items").find(".tag"+~~_manager.current_tag[a]).addClass("active")},[t],""),a.call(this,function(a){$("#current_tags").find(".tag"+~~_manager.current_tag[a]).addClass("active"),$("#current_tags").find(".btn_reset_select").removeClass("hide"),$("#top").find(".btn_filter").addClass("active"),$("#float_filter").find(".tag"+~~_manager.current_tag[a]).addClass("active")},[t],"");else a.call(this,function(){$("#items").find(".item_prod").addClass("active"),$("#current_tags").find(".btn_reset_select").addClass("hide"),$("#top").find(".btn_filter").removeClass("active")},[],"");a.sleep(10),a.call(this,function(){$("#items").animate({opacity:1},e,"linear")},[],""),a.sleep(e),a.call(this,function(){_manager.is_anim_sort=!1;for(var a=0;a<$("#items").find(".active").length;a++)_manager.current_prod.push(~~$($("#items").find(".active")[a]).find(".btn_product").attr("data-index"))},[],""),a.execute()},playMask:function(a){var e={size:"100%"};_manager.rewindmask_g&&_manager.rewindmask_g.kill(),_manager.playmask_g&&_manager.playmask_g.kill(),_manager.playmask_g=gsap.fromTo(e,{size:"100%"},{size:"200%",duration:.5,ease:Power0.easeNone,onUpdate:function(){a.stop().css({"-webkit-mask-size":e.size})}})},rewindMask:function(a){var e={size:"200%"};_manager.rewindmask_g&&_manager.rewindmask_g.kill(),_manager.playmask_g&&_manager.playmask_g.kill(),_manager.rewindmask_g=gsap.fromTo(e,{size:"200%"},{size:"100%",duration:.5,ease:Power0.easeNone,onUpdate:function(){a.stop().css({"-webkit-mask-size":e.size})}})},setScrollEvent:function(){},setWayPoint:function(){var a=.7*$(window).height(),e=.7*$(window).height(),t=.3*$(window).height(),n=1;_cmn.ua.sp&&(n=1.2,a=.65*$(window).height(),e=.9*$(window).height(),t=.45*$(window).height()),_manager.waypoints=[],_manager.waypoints.push(new Waypoint({element:$("#wrapper"),handler:function(a){"down"==a?_manager.toggleMenu(!0):_manager.toggleMenu(!1)},offset:-10})),_manager.waypoints.push(new Waypoint({element:$("#footer").find(".menus"),handler:function(a){"down"==a?_cmn.showFooter():_cmn.closeFooter()},offset:"100%"}))},toggleMenu:function(a){a?($("#btn_menu").addClass("active"),$("#header").addClass("passive")):($("#btn_menu").removeClass("active"),$("#header").removeClass("passive"))},showPhoto:function(a){_manager.copy_com[a]&&(_manager.copy_com[a].destroy(_manager.copy_com[a]),_manager.copy_com[a]=null);var e=new Command;_manager.copy_com[a]=e,e.call(this,function(){$("#photo_ttl").find(".copy").removeClass("active"),$("#photo_copy"+a).addClass("active"),$("#photo_copy"+a).find(".mark").addClass("open")},[],""),e.sleep(22);for(var t=0;t<$("#photo_copy"+a).find(".t").length;t++)e.call(this,function(e){$($("#photo_copy"+a).find(".t")[e]).addClass("open")},[t],""),e.sleep(22);e.execute()},closePhoto:function(a){_manager.copy_com[a]&&(_manager.copy_com[a].destroy(_manager.copy_com[a]),_manager.copy_com[a]=null);var e=new Command;e.call(this,function(){$(".photo_slide_item"+a).removeClass("open"),$("#photo_copy"+a).find(".mark").removeClass("open"),$("#photo_copy"+a).find(".t").removeClass("open")},[],""),e.execute()},startMarkHv:function(a){if(!a.hasClass("anim")){a.addClass("anim"),a.find("img").removeClass("active"),$(a.find("img")[0]).addClass("passive");for(var e=new Command,t=0;t<a.find("img").length;t++)e.call(this,function(e){a.find("img").removeClass("active"),$(a.find("img")[e]).addClass("active")},[t],""),e.sleep(20);e.call(this,function(){a.removeClass("anim")},[],""),e.execute()}},startMark:function(a){a.hasClass("anim")&&(a.removeClass("anim"),a.find("img").removeClass("active"));var e=~~a.attr("data-index");_manager.mask_com[e]&&(_manager.mask_com[e].destroy(_manager.mask_com[e]),_manager.mask_com[e]=null),a.removeClass("anim"),a.find("img").removeClass("active"),$(a.find("img")[0]).addClass("active");var t=new Command;_manager.mask_com[e]=t,a.addClass("anim");for(var n=0;n<a.find("img").length;n++)t.call(this,function(e){a.find("img").removeClass("active"),$(a.find("img")[e]).addClass("active")},[n],""),t.sleep(40);t.execute()},showFooter:function(){_manager.showFooterCom&&(_manager.showFooterCom.destroy(_manager.showFooterCom),_manager.showFooterCom=null),_manager.closeFooterCom&&(_manager.closeFooterCom.destroy(_manager.closeFooterCom),_manager.closeFooterCom=null);var a=new Command;_manager.showFooterCom=a,a.call(this,function(){$("#btn_menu").addClass("passive"),$("#footer").find(".menus").addClass("open"),$("#footer").find(".copy").addClass("open"),$("#footer").find(".logo_set").addClass("open"),_manager.startMarkFooter($("#footer").find(".mark_anim"))},[],""),a.execute()},closeFooter:function(){_manager.showFooterCom&&(_manager.showFooterCom.destroy(_manager.showFooterCom),_manager.showFooterCom=null),_manager.closeFooterCom&&(_manager.closeFooterCom.destroy(_manager.closeFooterCom),_manager.closeFooterCom=null);var a=new Command;_manager.closeFooterCom=a,a.call(this,function(){$("#btn_menu").removeClass("passive"),$("#footer").find(".menus").removeClass("open"),$("#footer").find(".copy").removeClass("open"),$("#footer").find(".logo_set").removeClass("open")},[],""),a.execute()},setResize:function(){var a=_cmn.ua.sp?"orientationchange":"resize";$(window).on(a,function(){_manager.resize(),setTimeout(function(){_manager.resize()},500)})},resize:function(a,e){$(window),window.innerWidth,$(window).height();_cmn.windowH=$(".screen").height(),$(".float_img").css({height:_cmn.windowH}),$("#float_product").css({height:_cmn.windowH}),$(".float_img").css({width:$(".img_base").width()}),$("#prod_slide").css({width:$(".img_base").width(),height:_cmn.windowH}),$("#prod_scroll").css({width:_cmn.windowW-$(".img_base").width(),height:_cmn.windowH}),_cmn.spview,Waypoint.refreshAll()},resize_all:function(){}});
$(function(){}),window.onload=function(){_cmn||(_cmn=CmnManager.create(),_cmn.set(),_cmn.start())};